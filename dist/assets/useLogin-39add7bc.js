import{r as l,u as S,ai as w,aj as x,ak as q}from"./index-d3dc8ec6.js";import{c as y,a as u,d as C,u as L,o as P}from"./yup-ca1bcb37.js";import{H as $}from"./httpClient-458ee8d8.js";function M(){const[m,t]=l.useState(!1),o=S(),d=w(),{isAuthenticated:p,saveSession:f}=x(),{enqueueSnackbar:g}=q(),h=y({email:u().email("Please enter valid email").required("Please enter email"),password:u().required("Please enter password"),rememberMe:C().oneOf([!0],"Checkbox must be checked").optional()}),{control:k,handleSubmit:b}=L({resolver:P(h),defaultValues:{email:"demo@demo.com",password:"password"}}),s=l.useMemo(()=>{var a;return(a=o.state)==null||a.from.pathname,"/"},[o.state]),v=b(async a=>{var r,n,i,c;t(!0);try{const e=await $.post("/login",a);e.data.token&&(f({...e.data??{},token:e.data.token}),d(s))}catch(e){(n=(r=e.response)==null?void 0:r.data)!=null&&n.error&&g((c=(i=e.response)==null?void 0:i.data)==null?void 0:c.error,{variant:"error"})}finally{t(!1)}});return{loading:m,login:v,redirectUrl:s,isAuthenticated:p,control:k}}export{M as u};
