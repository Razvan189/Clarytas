import{r as c,_ as K,j as N,f as R,e as q,g as B,s as _,t as J,m as Q,x as X,h as Y,i as Z}from"./index-d3dc8ec6.js";import{P as ee,a as te}from"./Popover-559dfa8c.js";import{u as se,o as O,a as oe}from"./Box-34926251.js";import{g as re}from"./Modal-396d72e4.js";import{L as ne}from"./List-79b6904f.js";import{u as A}from"./useSlotProps-ef556448.js";const ae=["actions","autoFocus","autoFocusItem","children","className","disabledItemsFocusable","disableListWrap","onKeyDown","variant"];function k(t,e,o){return t===e?t.firstChild:e&&e.nextElementSibling?e.nextElementSibling:o?null:t.firstChild}function H(t,e,o){return t===e?o?t.firstChild:t.lastChild:e&&e.previousElementSibling?e.previousElementSibling:o?null:t.lastChild}function $(t,e){if(e===void 0)return!0;let o=t.innerText;return o===void 0&&(o=t.textContent),o=o.trim().toLowerCase(),o.length===0?!1:e.repeating?o[0]===e.keys[0]:o.indexOf(e.keys.join(""))===0}function C(t,e,o,y,m,g){let p=!1,i=m(t,e,e?o:!1);for(;i;){if(i===t.firstChild){if(p)return!1;p=!0}const h=y?!1:i.disabled||i.getAttribute("aria-disabled")==="true";if(!i.hasAttribute("tabindex")||!$(i,g)||h)i=m(t,i,o);else return i.focus(),!0}return!1}const ie=c.forwardRef(function(e,o){const{actions:y,autoFocus:m=!1,autoFocusItem:g=!1,children:p,className:i,disabledItemsFocusable:h=!1,disableListWrap:M=!1,onKeyDown:P,variant:b="selectedMenu"}=e,I=K(e,ae),f=c.useRef(null),T=c.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});se(()=>{m&&f.current.focus()},[m]),c.useImperativeHandle(y,()=>({adjustStyleForScrollbar:(s,{direction:n})=>{const l=!f.current.style.width;if(s.clientHeight<f.current.clientHeight&&l){const u=`${re(O(s))}px`;f.current.style[n==="rtl"?"paddingLeft":"paddingRight"]=u,f.current.style.width=`calc(100% + ${u})`}return f.current}}),[]);const F=s=>{const n=f.current,l=s.key,u=O(n).activeElement;if(l==="ArrowDown")s.preventDefault(),C(n,u,M,h,k);else if(l==="ArrowUp")s.preventDefault(),C(n,u,M,h,H);else if(l==="Home")s.preventDefault(),C(n,null,M,h,k);else if(l==="End")s.preventDefault(),C(n,null,M,h,H);else if(l.length===1){const r=T.current,v=l.toLowerCase(),D=performance.now();r.keys.length>0&&(D-r.lastTime>500?(r.keys=[],r.repeating=!0,r.previousKeyMatched=!0):r.repeating&&v!==r.keys[0]&&(r.repeating=!1)),r.lastTime=D,r.keys.push(v);const S=u&&!r.repeating&&$(u,r);r.previousKeyMatched&&(S||C(n,u,!1,h,k,r))?s.preventDefault():r.previousKeyMatched=!1}P&&P(s)},x=oe(f,o);let a=-1;c.Children.forEach(p,(s,n)=>{if(!c.isValidElement(s)){a===n&&(a+=1,a>=p.length&&(a=-1));return}s.props.disabled||(b==="selectedMenu"&&s.props.selected||a===-1)&&(a=n),a===n&&(s.props.disabled||s.props.muiSkipListHighlight||s.type.muiSkipListHighlight)&&(a+=1,a>=p.length&&(a=-1))});const w=c.Children.map(p,(s,n)=>{if(n===a){const l={};return g&&(l.autoFocus=!0),s.props.tabIndex===void 0&&b==="selectedMenu"&&(l.tabIndex=0),c.cloneElement(s,l)}return s});return N.jsx(ne,R({role:"menu",ref:x,className:i,onKeyDown:F,tabIndex:m?0:-1},I,{children:w}))}),le=ie;function ue(t){return q("MuiMenu",t)}B("MuiMenu",["root","paper","list"]);const ce=["onEntering"],pe=["autoFocus","children","className","disableAutoFocusItem","MenuListProps","onClose","open","PaperProps","PopoverClasses","transitionDuration","TransitionProps","variant","slots","slotProps"],fe={vertical:"top",horizontal:"right"},de={vertical:"top",horizontal:"left"},me=t=>{const{classes:e}=t;return Z({root:["root"],paper:["paper"],list:["list"]},ue,e)},he=_(ee,{shouldForwardProp:t=>J(t)||t==="classes",name:"MuiMenu",slot:"Root",overridesResolver:(t,e)=>e.root})({}),ge=_(te,{name:"MuiMenu",slot:"Paper",overridesResolver:(t,e)=>e.paper})({maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"}),Me=_(le,{name:"MuiMenu",slot:"List",overridesResolver:(t,e)=>e.list})({outline:0}),ye=c.forwardRef(function(e,o){var y,m;const g=Q({props:e,name:"MuiMenu"}),{autoFocus:p=!0,children:i,className:h,disableAutoFocusItem:M=!1,MenuListProps:P={},onClose:b,open:I,PaperProps:f={},PopoverClasses:T,transitionDuration:F="auto",TransitionProps:{onEntering:x}={},variant:a="selectedMenu",slots:w={},slotProps:s={}}=g,n=K(g.TransitionProps,ce),l=K(g,pe),u=X(),r=R({},g,{autoFocus:p,disableAutoFocusItem:M,MenuListProps:P,onEntering:x,PaperProps:f,transitionDuration:F,TransitionProps:n,variant:a}),v=me(r),D=p&&!M&&I,S=c.useRef(null),z=(d,L)=>{S.current&&S.current.adjustStyleForScrollbar(d,{direction:u?"rtl":"ltr"}),x&&x(d,L)},U=d=>{d.key==="Tab"&&(d.preventDefault(),b&&b(d,"tabKeyDown"))};let E=-1;c.Children.map(i,(d,L)=>{c.isValidElement(d)&&(d.props.disabled||(a==="selectedMenu"&&d.props.selected||E===-1)&&(E=L))});const j=(y=w.paper)!=null?y:ge,W=(m=s.paper)!=null?m:f,G=A({elementType:w.root,externalSlotProps:s.root,ownerState:r,className:[v.root,h]}),V=A({elementType:j,externalSlotProps:W,ownerState:r,className:v.paper});return N.jsx(he,R({onClose:b,anchorOrigin:{vertical:"bottom",horizontal:u?"right":"left"},transformOrigin:u?fe:de,slots:{paper:j,root:w.root},slotProps:{root:G,paper:V},open:I,ref:o,transitionDuration:F,TransitionProps:R({onEntering:z},n),ownerState:r},l,{classes:T,children:N.jsx(Me,R({onKeyDown:U,actions:S,autoFocus:p&&(E===-1||M),autoFocusItem:D,variant:a},P,{className:Y(v.list,P.className),children:i}))}))}),Ce=ye;export{Ce as M,le as a};
